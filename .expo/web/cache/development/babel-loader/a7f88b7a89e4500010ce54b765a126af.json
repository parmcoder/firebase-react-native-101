{"ast":null,"code":"\"use strict\";\n\nvar _jsxFileName = \"/Users/supakrit/Desktop/firebase-react-native-101/node_modules/react-native-calculator/dist/Display.js\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) {\n      if (b.hasOwnProperty(p)) d[p] = b[p];\n    }\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = require(\"react\");\n\nvar react_native_1 = require(\"react-native-web/dist/index\");\n\nvar FACTOR = 0.5;\n\nvar Display = function (_super) {\n  __extends(Display, _super);\n\n  function Display(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this._mounted = false;\n    _this.tryNewSize = _this.tryNewSize.bind(_this);\n    _this.state = {\n      size: props.height - FACTOR,\n      fixSize: props.height - FACTOR,\n      fixValue: props.value,\n      complete: false,\n      ready: false,\n      fontHeight: FACTOR\n    };\n    return _this;\n  }\n\n  Display.prototype.tryNewSize = function (force) {\n    var _this = this;\n\n    if (!this._mounted || react_native_1.Platform.OS === 'ios') {\n      return;\n    }\n\n    if (force) {\n      this.setState({\n        complete: false,\n        ready: false\n      });\n    }\n\n    react_native_1.NativeModules.UIManager.measureLayoutRelativeToParent(react_native_1.findNodeHandle(this._text), function () {\n      throw new Error('error');\n    }, function (_x, _y, w, h) {\n      _this.isSizeOk(w, h);\n    });\n  };\n\n  Display.prototype.isSizeOk = function (w, h) {\n    if (!this._mounted) {\n      return;\n    }\n\n    var complete = this.state.complete;\n    var size = this.state.size;\n    var _a = this.props,\n        height = _a.height,\n        width = _a.width,\n        value = _a.value;\n\n    if (h > height || w > width) {\n      if (size === FACTOR) {\n        this.setState({\n          complete: true\n        });\n      } else {\n        this.setState({\n          size: size -= FACTOR,\n          complete: true\n        });\n        this.tryNewSize();\n      }\n    } else {\n      if (!complete) {\n        this.setState({\n          size: size += FACTOR\n        });\n        this.tryNewSize();\n      } else {\n        this.setState({\n          ready: true,\n          fixSize: size,\n          fixValue: value,\n          fontHeight: h\n        });\n      }\n    }\n  };\n\n  Display.prototype.componentDidMount = function () {\n    this._mounted = true;\n    this.tryNewSize();\n  };\n\n  Display.prototype.componentWillUnmount = function () {\n    this._mounted = false;\n  };\n\n  Display.prototype.componentDidUpdate = function (newProps) {\n    if (react_native_1.Platform.OS === 'ios') {\n      return;\n    }\n\n    if (this.props.value !== newProps.value) {\n      this.setState({\n        complete: false\n      }, this.tryNewSize);\n    }\n  };\n\n  Display.prototype.render = function () {\n    return react_native_1.Platform.OS === 'ios' ? this.renderIOS() : this.renderAndroid();\n  };\n\n  Display.prototype.renderIOS = function () {\n    var _a = this.props,\n        height = _a.height,\n        style = _a.style,\n        value = _a.value;\n    return React.createElement(react_native_1.View, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }\n    }, React.createElement(react_native_1.Text, {\n      adjustsFontSizeToFit: true,\n      numberOfLines: 1,\n      style: [styles.displayText, style, {\n        fontSize: height,\n        height: height,\n        lineHeight: height,\n        color: style.color\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }\n    }, value));\n  };\n\n  Display.prototype.renderAndroid = function () {\n    var _this = this;\n\n    var _a = this.state,\n        size = _a.size,\n        fixSize = _a.fixSize,\n        fixValue = _a.fixValue,\n        fontHeight = _a.fontHeight,\n        ready = _a.ready;\n    var _b = this.props,\n        value = _b.value,\n        height = _b.height,\n        style = _b.style;\n    return React.createElement(react_native_1.View, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }\n    }, React.createElement(react_native_1.Text, {\n      ref: function ref(component) {\n        return _this._text = component;\n      },\n      style: [styles.hiddenText, {\n        fontSize: size\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }\n    }, value), React.createElement(react_native_1.Text, {\n      style: [styles.displayText, style, {\n        fontSize: fixSize,\n        height: height,\n        top: (height - fontHeight) / 2,\n        color: ready ? style.color : 'transparent'\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }\n    }, fixValue));\n  };\n\n  return Display;\n}(React.Component);\n\nexports.Display = Display;\nvar styles = react_native_1.StyleSheet.create({\n  hiddenText: {\n    backgroundColor: 'transparent',\n    color: 'transparent'\n  },\n  displayText: {\n    flex: 1,\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    bottom: 0,\n    right: 0,\n    backgroundColor: 'transparent'\n  }\n});","map":{"version":3,"sources":["../src/Display.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar React = require(\"react\");\r\nvar react_native_1 = require(\"react-native\");\r\nvar FACTOR = 0.5;\r\nvar Display = /** @class */ (function (_super) {\r\n    __extends(Display, _super);\r\n    function Display(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this._mounted = false;\r\n        _this.tryNewSize = _this.tryNewSize.bind(_this);\r\n        _this.state = {\r\n            size: props.height - FACTOR,\r\n            fixSize: props.height - FACTOR,\r\n            fixValue: props.value,\r\n            complete: false,\r\n            ready: false,\r\n            fontHeight: FACTOR\r\n        };\r\n        return _this;\r\n    }\r\n    Display.prototype.tryNewSize = function (force) {\r\n        var _this = this;\r\n        if (!this._mounted || react_native_1.Platform.OS === 'ios') {\r\n            return;\r\n        }\r\n        if (force) {\r\n            this.setState({ complete: false, ready: false });\r\n        }\r\n        react_native_1.NativeModules.UIManager.measureLayoutRelativeToParent(react_native_1.findNodeHandle(this._text), function () {\r\n            throw new Error('error');\r\n        }, function (_x, _y, w, h) {\r\n            _this.isSizeOk(w, h);\r\n        });\r\n    };\r\n    Display.prototype.isSizeOk = function (w, h) {\r\n        if (!this._mounted) {\r\n            return;\r\n        }\r\n        var complete = this.state.complete;\r\n        var size = this.state.size;\r\n        var _a = this.props, height = _a.height, width = _a.width, value = _a.value;\r\n        if (h > height || w > width) {\r\n            if (size === FACTOR) {\r\n                this.setState({ complete: true });\r\n            }\r\n            else {\r\n                this.setState({ size: (size -= FACTOR), complete: true });\r\n                this.tryNewSize();\r\n            }\r\n        }\r\n        else {\r\n            if (!complete) {\r\n                this.setState({ size: (size += FACTOR) });\r\n                this.tryNewSize();\r\n            }\r\n            else {\r\n                this.setState({\r\n                    ready: true,\r\n                    fixSize: size,\r\n                    fixValue: value,\r\n                    fontHeight: h\r\n                });\r\n            }\r\n        }\r\n    };\r\n    Display.prototype.componentDidMount = function () {\r\n        this._mounted = true;\r\n        this.tryNewSize();\r\n    };\r\n    Display.prototype.componentWillUnmount = function () {\r\n        this._mounted = false;\r\n    };\r\n    Display.prototype.componentDidUpdate = function (newProps) {\r\n        if (react_native_1.Platform.OS === 'ios') {\r\n            return;\r\n        }\r\n        if (this.props.value !== newProps.value) {\r\n            this.setState({ complete: false }, this.tryNewSize);\r\n        }\r\n    };\r\n    Display.prototype.render = function () {\r\n        return react_native_1.Platform.OS === 'ios' ? this.renderIOS() : this.renderAndroid();\r\n    };\r\n    Display.prototype.renderIOS = function () {\r\n        var _a = this.props, height = _a.height, style = _a.style, value = _a.value;\r\n        return (<react_native_1.View>\r\n        <react_native_1.Text adjustsFontSizeToFit={true} numberOfLines={1} style={[\r\n            styles.displayText,\r\n            style,\r\n            {\r\n                fontSize: height,\r\n                height: height,\r\n                lineHeight: height,\r\n                // @ts-ignore\r\n                color: style.color\r\n            }\r\n        ]}>\r\n          {value}\r\n        </react_native_1.Text>\r\n      </react_native_1.View>);\r\n    };\r\n    Display.prototype.renderAndroid = function () {\r\n        var _this = this;\r\n        var _a = this.state, size = _a.size, fixSize = _a.fixSize, fixValue = _a.fixValue, fontHeight = _a.fontHeight, ready = _a.ready;\r\n        var _b = this.props, value = _b.value, height = _b.height, style = _b.style;\r\n        return (<react_native_1.View>\r\n        <react_native_1.Text ref={function (component) { return (_this._text = component); }} style={[styles.hiddenText, { fontSize: size }]}>\r\n          {value}\r\n        </react_native_1.Text>\r\n        <react_native_1.Text style={[\r\n            // ready ? styles.displayText : styles.hiddenText,\r\n            styles.displayText,\r\n            style,\r\n            {\r\n                fontSize: fixSize,\r\n                height: height,\r\n                top: (height - fontHeight) / 2,\r\n                // @ts-ignore\r\n                color: ready ? style.color : 'transparent'\r\n            }\r\n        ]}>\r\n          {fixValue}\r\n        </react_native_1.Text>\r\n      </react_native_1.View>);\r\n    };\r\n    return Display;\r\n}(React.Component));\r\nexports.Display = Display;\r\nvar styles = react_native_1.StyleSheet.create({\r\n    hiddenText: {\r\n        backgroundColor: 'transparent',\r\n        color: 'transparent'\r\n    },\r\n    displayText: {\r\n        flex: 1,\r\n        position: 'absolute',\r\n        left: 0,\r\n        top: 0,\r\n        bottom: 0,\r\n        right: 0,\r\n        backgroundColor: 'transparent'\r\n    }\r\n});\r\n//# sourceMappingURL=Display.js.map"]},"metadata":{},"sourceType":"script"}